<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Report</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid>
    <ion-row class="report-top-row" justify-content-center>
      <ion-col size="12" size-md="4">
        <ion-card class="report-top-card streak-card">
          <ion-card-header>
            <ion-icon name="flame" size="large"></ion-icon>
            <ion-card-title>Streak</ion-card-title>
            <ion-chip *ngIf="streak >= 7" color="warning" style="margin-left:8px;">
              <ion-icon name="star"></ion-icon>
              {{ streak >= 30 ? 'IncrÃ­vel! 30+ dias!' : 'Ã“timo progresso!' }}
            </ion-chip>
          </ion-card-header>
          <ion-card-content>
            <h2>{{ streak }} days</h2>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col size="12" size-md="4">
        <ion-card class="report-top-card">
          <ion-card-header>
            <ion-icon name="checkmark-circle" size="large"></ion-icon>
            <ion-card-title>Complete</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h2>{{ totalCompleted }}</h2>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col size="12" size-md="4">
        <ion-card class="report-top-card">
          <ion-card-header>
            <ion-card-title>Motivational Message</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p style="font-size:1.2em;">
              <span *ngIf="streak >= 7">ðŸ”¥</span>
              {{ motivationalMessage }}
            </p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Habits completed this week</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ng-container *ngIf="habitsData && habitsData.length > 0; else noData">
              <app-bar-chart [habitsData]="habitsData"></app-bar-chart>
            </ng-container>
            <ng-template #noData>
              <div class="no-data-message">No habits registered this week.</div>
            </ng-template>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Monthly progress</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-progress-bar value="{{ streak / 30 }}" color="success"></ion-progress-bar>
            <div style="margin-top:8px;">Current streak: {{ streak }} 30 days</div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content> 