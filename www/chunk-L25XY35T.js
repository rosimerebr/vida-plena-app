import{a as b}from"./chunk-RM6A764G.js";import{c as z,d as L,j as T,l as E}from"./chunk-YQ34Z6K7.js";import{B as y,E as l,G as a,H as s,I as P,M as S,N as p,O as m,V as g,Va as H,W as h,a as x,da as k,g as u,ga as M,i as _,ia as w,ma as I,n as v,o as C,u as c,v as d,x as O}from"./chunk-KB37ESMY.js";import"./chunk-RHZBV3UF.js";import"./chunk-34QWLOQV.js";import"./chunk-MZFQXXBY.js";import"./chunk-IIMO22WL.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as f}from"./chunk-JHI3MBHO.js";var D=(()=>{class i{constructor(t){this.http=t}saveHabitLog(t){localStorage.setItem("habit-log-"+t.date,JSON.stringify(t.habits))}getHabitLog(t){let e=localStorage.getItem("habit-log-"+t);return e?JSON.parse(e):null}sendHabitToBackend(t){return this.http.post(`${b.apiUrl}/report`,t)}saveHabitWithBackendSync(t,e){this.saveHabitLog(t);let n=[];return Object.entries(t.habits).forEach(([o,r])=>{r&&n.push({userId:e,habit:o,date:t.date})}),n.length>0?this.http.post(`${b.apiUrl}/report`,n):new x(o=>{o.next({message:"No habits to send"}),o.complete()})}static{this.\u0275fac=function(e){return new(e||i)(_(w))}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function B(i,F){if(i&1){let t=S();a(0,"div",6),P(1,"ion-icon",7),a(2,"span",8),g(3),s(),a(4,"ion-toggle",9),p("ionChange",function(n){let o=v(t).$implicit,r=m();return C(r.onToggle(o.name,n.detail.checked))}),s()()}if(i&2){let t=F.$implicit,e=m();c(),l("name",t.icon),c(2),h(t.name),c(),l("checked",e.habitStatus[t.name])}}var q=(()=>{class i{constructor(t,e){this.habitService=t,this.router=e,this.today="",this.displayDate="",this.habits=[{name:"Sunlight",icon:"sunny"},{name:"Water",icon:"water"},{name:"Air",icon:"leaf"},{name:"Healthy Food",icon:"restaurant"},{name:"Physical Exercise",icon:"walk"},{name:"Temperance",icon:"scale"},{name:"Rest",icon:"moon"},{name:"Trust in God",icon:"heart-circle-outline"}],this.habitStatus={}}ngOnInit(){let t=new Date;this.today=t.toISOString().slice(0,10);let e=t.toLocaleDateString("en-US",{month:"long"}),n=t.getDate();this.displayDate=`${e} ${n}`;let o=this.habitService.getHabitLog(this.today);this.habits.forEach(r=>{this.habitStatus[r.name]=o?!!o[r.name]:!1})}onToggle(t,e){this.habitStatus[t]=e}save(){let t={date:this.today,habits:f({},this.habitStatus)};this.habitService.saveHabitWithBackendSync(t,"default-user").subscribe({next:n=>{console.log("Habits saved successfully:",n),this.router.navigate(["/home"])},error:n=>{console.error("Error saving habits to backend:",n),this.habitService.saveHabitLog(t),this.router.navigate(["/home"])}})}static{this.\u0275fac=function(e){return new(e||i)(d(D),d(I))}}static{this.\u0275cmp=O({type:i,selectors:[["app-habit-log"]],decls:8,vars:3,consts:[[3,"fullscreen"],[1,"habit-log-container"],[1,"habit-log-date"],[1,"habit-log-list"],["class","habit-log-item",4,"ngFor","ngForOf"],["expand","block",1,"habit-log-save-btn",3,"click"],[1,"habit-log-item"],[3,"name"],[1,"habit-log-label"],[3,"ionChange","checked"]],template:function(e,n){e&1&&(a(0,"ion-content",0)(1,"div",1)(2,"div",2),g(3),s(),a(4,"div",3),y(5,B,5,3,"div",4),s(),a(6,"ion-button",5),p("click",function(){return n.save()}),g(7,"Save"),s()()()),e&2&&(l("fullscreen",!0),c(3),h(n.displayDate),c(2),l("ngForOf",n.habits))},dependencies:[L,M,k,H,T,E,z],styles:[".habit-log-container[_ngcontent-%COMP%]{background:#fff;border-radius:28px;box-shadow:0 2px 16px #0000000f;max-width:400px;margin:40px auto 0;padding:32px 24px 28px;display:flex;flex-direction:column;align-items:stretch}.habit-log-date[_ngcontent-%COMP%]{background:#f5ede3;color:#2e473b;font-size:1.6rem;font-weight:600;border-radius:18px;padding:10px 0;text-align:center;margin-bottom:28px}.habit-log-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:24px}.habit-log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;border-bottom:1px solid #e6e6e6;padding:8px 0}.habit-log-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.habit-log-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#2e473b;min-width:32px}.habit-log-label[_ngcontent-%COMP%]{flex:1;font-size:1.18rem;color:#2e473b;font-weight:500}ion-toggle[_ngcontent-%COMP%]{--handle-background-checked: #4b6e5c;--handle-background: #e6e6e6;--background-checked: #dbe7df;--background: #e6e6e6;margin-right:0}.habit-log-notes-label[_ngcontent-%COMP%]{font-size:1.1rem;color:#2e473b;font-weight:500;margin:18px 0 6px}.habit-log-notes[_ngcontent-%COMP%]{background:#fafafa;border-radius:12px;border:1px solid #e6e6e6;font-size:1rem;padding:10px 12px;margin-bottom:22px;min-height:48px}.habit-log-save-btn[_ngcontent-%COMP%]{--background: #4b6e5c;--border-radius: 16px;font-size:1.2rem;font-weight:700;letter-spacing:.5px;height:48px}.home-icons-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;background:#e6f9d5;padding:24px 8px 16px;border-radius:12px;margin:0 auto 32px;max-width:900px;flex-wrap:wrap}.icon-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;min-width:80px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:4px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b;margin-top:2px}@media (max-width: 480px){.habit-log-container[_ngcontent-%COMP%]{padding:16px 4px 18px;border-radius:16px}.habit-log-date[_ngcontent-%COMP%]{font-size:1.2rem;padding:6px 0}.habit-log-label[_ngcontent-%COMP%]{font-size:1rem}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}}"]})}}return i})();export{q as HabitLogPage};
