import{a as O}from"./chunk-I2H6T5XO.js";import{g as x}from"./chunk-ZVQGPRJY.js";import"./chunk-RM6A764G.js";import"./chunk-CXOURO3F.js";import"./chunk-QUJFQN2Y.js";import"./chunk-5FCHEXSL.js";import"./chunk-4CVPKZA4.js";import"./chunk-BDYKZDQC.js";import"./chunk-H4ZOJJKK.js";import"./chunk-S2VWKIYS.js";import"./chunk-A3MNM4YE.js";import"./chunk-7FY2OE2O.js";import"./chunk-JCQ7FCCI.js";import"./chunk-63MUEZF4.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EAEWKW6I.js";import"./chunk-CKP3SGE2.js";import"./chunk-OFNGLZOM.js";import{c as T,d as k,e as v,f as I,g as R,j as W,k as E}from"./chunk-7ME6M5UI.js";import{$ as m,F as w,H as n,I as r,J as _,O as c,Ra as b,Sa as y,Va as P,W as s,Wa as S,Z as g,_ as d,ha as M,na as C,v as l,w as h,y as f}from"./chunk-JA4QAL2P.js";import"./chunk-RHZBV3UF.js";import"./chunk-34QWLOQV.js";import"./chunk-MZFQXXBY.js";import"./chunk-IIMO22WL.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as u}from"./chunk-JHI3MBHO.js";var z=(()=>{class p{constructor(o,e,t){this.router=o,this.toastController=e,this.authService=t,this.fullName="",this.email="",this.password="",this.dob="",this.weight=""}ngOnInit(){}formatDateOfBirth(o){let e=o.target.value.replace(/\D/g,"");e.length>8&&(e=e.substring(0,8)),e.length>=2&&(e=e.substring(0,2)+"/"+e.substring(2)),e.length>=5&&(e=e.substring(0,5)+"/"+e.substring(5)),this.dob=e}convertDateForBackend(o){if(!o||o.length!==8)return"";let e=o.split("/");if(e.length!==3)return"";let t=e[0],a=e[1],i=e[2];return`${parseInt(i)<50?"20"+i:"19"+i}-${a.padStart(2,"0")}-${t.padStart(2,"0")}`}onRegister(){return u(this,null,function*(){if(!this.fullName||!this.email||!this.password||!this.dob){yield(yield this.toastController.create({message:"Por favor, preencha todos os campos obrigat\xF3rios.",duration:2e3,color:"danger",position:"top"})).present();return}if(this.dob.length!==8){yield(yield this.toastController.create({message:"Por favor, insira uma data v\xE1lida no formato DD/MM/YY.",duration:2e3,color:"danger",position:"top"})).present();return}let o={fullName:this.fullName,email:this.email,password:this.password,dateOfBirth:this.convertDateForBackend(this.dob),weight:parseFloat(this.weight)||0};this.authService.register(o).subscribe({next:e=>u(this,null,function*(){console.log("Usu\xE1rio registrado com sucesso:",e),yield(yield this.toastController.create({message:"Cadastro realizado com sucesso!",duration:2e3,color:"success",position:"top"})).present(),setTimeout(()=>{this.router.navigate(["/login"])},2e3)}),error:e=>u(this,null,function*(){console.error("Erro no registro:",e);let t="Erro ao realizar cadastro.";e.error?.message?t=e.error.message:e.status===409?t="Este e-mail j\xE1 est\xE1 cadastrado.":e.status===0&&(t="Erro de conex\xE3o. Verifique se o backend est\xE1 rodando."),yield(yield this.toastController.create({message:t,duration:3e3,color:"danger",position:"top"})).present()})})})}onGoogleRegister(){console.log("Register with Google")}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(e){return new(e||p)(h(C),h(x),h(O))}}static{this.\u0275cmp=f({type:p,selectors:[["app-register"]],decls:29,vars:6,consts:[[3,"fullscreen"],["id","container"],["src","assets/images/logo.png","alt","Vida Plena Logo"],["label","Full name:",1,"custom",3,"ngModelChange","ngModel"],["label","Email:",1,"custom",3,"ngModelChange","ngModel"],["type","password:","label","Password:",3,"ngModelChange","ngModel"],["slot","end"],["label","Date of birth:","placeholder","DD/MM/YY","maxlength","8",1,"custom",3,"ngModelChange","input","ngModel"],["label","Weight:",1,"custom",3,"ngModelChange","ngModel"],[1,"wrapper"],[3,"click"],["color","light",3,"click"],["name","logo-google","slot","start"],[2,"text-align","center","margin-top","16px"],[1,"login-link",3,"click"]],template:function(e,t){e&1&&(n(0,"ion-content",0)(1,"div",1),_(2,"ion-img",2),n(3,"h2"),s(4,"Welcome!"),r(),n(5,"p"),s(6,"Take the first step toward a healthier, purposeful life."),r(),n(7,"ion-item")(8,"ion-input",3),m("ngModelChange",function(i){return d(t.fullName,i)||(t.fullName=i),i}),r()(),n(9,"ion-item")(10,"ion-input",4),m("ngModelChange",function(i){return d(t.email,i)||(t.email=i),i}),r()(),n(11,"ion-item")(12,"ion-input",5),m("ngModelChange",function(i){return d(t.password,i)||(t.password=i),i}),_(13,"ion-input-password-toggle",6),r()(),n(14,"ion-item")(15,"ion-input",7),m("ngModelChange",function(i){return d(t.dob,i)||(t.dob=i),i}),c("input",function(i){return t.formatDateOfBirth(i)}),r()(),n(16,"ion-item")(17,"ion-input",8),m("ngModelChange",function(i){return d(t.weight,i)||(t.weight=i),i}),r()(),n(18,"div",9)(19,"ion-button",10),c("click",function(){return t.onRegister()}),s(20,"Sign up"),r()(),n(21,"ion-button",11),c("click",function(){return t.onGoogleRegister()}),_(22,"ion-icon",12),s(23," Sign up with Google "),r(),n(24,"div",13),s(25," Already have an account? "),n(26,"a",14),c("click",function(){return t.goToLogin()}),n(27,"b"),s(28,"Log in"),r()()()()()),e&2&&(w("fullscreen",!0),l(8),g("ngModel",t.fullName),l(2),g("ngModel",t.email),l(2),g("ngModel",t.password),l(3),g("ngModel",t.dob),l(2),g("ngModel",t.weight))},dependencies:[v,R,k,M,S,b,P,y,E,I,T,W],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:40%;transform:translateY(-50%);padding:0 16px}ion-item[_ngcontent-%COMP%]{width:90%;max-width:400px;margin:0 auto}ion-img[_ngcontent-%COMP%]{width:90%;max-width:300px;height:auto;margin:70px auto 0;display:block}ion-content[_ngcontent-%COMP%]{--background: #D7F1C3}ion-input.custom[_ngcontent-%COMP%]{--background: none}.wrapper[_ngcontent-%COMP%]{margin-top:16px}.login-link[_ngcontent-%COMP%]{cursor:pointer;color:#007bff;text-decoration:underline}@media (max-width: 480px){#container[_ngcontent-%COMP%]{top:35%;padding:0 8px}ion-item[_ngcontent-%COMP%]{width:95%;max-width:350px}ion-img[_ngcontent-%COMP%]{width:95%;max-width:250px;margin:50px auto 0}}@media (max-width: 768px){#container[_ngcontent-%COMP%]{top:30%}}"]})}}return p})();export{z as RegisterPage};
