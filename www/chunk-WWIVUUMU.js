import{a as P}from"./chunk-4TYAFRLP.js";import{a as v,b as C}from"./chunk-QZINCRWF.js";import{a as k}from"./chunk-F7E72B2R.js";import"./chunk-RM6A764G.js";import{c as b,e as f,r as _}from"./chunk-AE23IOV2.js";import{F as u,G as e,H as o,I as l,N as c,W as r,Y as p,oa as x,v as s,w as m,y as h}from"./chunk-PTDB2MRV.js";import"./chunk-FJRRL5JZ.js";import"./chunk-3C4MD3TU.js";import"./chunk-SUXJXZP3.js";import"./chunk-UHOD3RQT.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-2LSUWKNB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var z=(()=>{class g{constructor(n,i,t,a){this.router=n,this.bibleService=i,this.reportService=t,this.authService=a,this.weekData=[{label:"S",value:0},{label:"M",value:0},{label:"T",value:0},{label:"W",value:0},{label:"T",value:0},{label:"F",value:0},{label:"S",value:0}],this.spiritualVerse=null,this.reportData=null,this.habitsData=[],this.totalCompleted=0,this.streak=0}ngOnInit(){console.log("Fetching verse..."),this.bibleService.getRandomVerse().subscribe({next:n=>{console.log("Verse received:",n),this.spiritualVerse=n},error:n=>{console.error("Error fetching verse:",n)}}),this.loadWeeklyReport()}loadWeeklyReport(){console.log("Loading weekly report...");let n=this.authService.getUserIdFromToken();if(!n){console.error("Usu\xE1rio n\xE3o autenticado."),this.useTestData();return}this.reportService.getWeeklyReport(n).subscribe({next:i=>{console.log("Weekly report received:",i),this.reportData=i,setTimeout(()=>{this.processHabitsData(i),this.calculateStats(i),console.log("Final habits data after processing:",this.habitsData)},100)},error:i=>{console.error("Error fetching weekly report:",i),this.useTestData()}})}useTestData(){console.log("Using test data due to error"),this.habitsData=[{name:"Sunlight",icon:"sunny",weeklyTotal:3},{name:"Water",icon:"water",weeklyTotal:5},{name:"Air",icon:"leaf",weeklyTotal:2},{name:"Healthy Food",icon:"restaurant",weeklyTotal:4},{name:"Exercise",icon:"walk",weeklyTotal:6},{name:"Temperance",icon:"scale",weeklyTotal:1},{name:"Rest",icon:"moon",weeklyTotal:7},{name:"Trust in God",icon:"heart-circle-outline",weeklyTotal:3}],this.totalCompleted=this.habitsData.reduce((n,i)=>n+i.weeklyTotal,0),this.streak=Math.max(...this.habitsData.map(n=>n.weeklyTotal))}processHabitsData(n){if(!n)return;console.log("Processing habits data:",n);let i=[{name:"Sunlight",icon:"sunny"},{name:"Water",icon:"water"},{name:"Air",icon:"leaf"},{name:"Healthy Food",icon:"restaurant"},{name:"Exercise",icon:"walk"},{name:"Temperance",icon:"scale"},{name:"Rest",icon:"moon"},{name:"Trust in God",icon:"heart-circle-outline"}];this.habitsData=i.map(t=>{let a=n[t.name]||[0,0,0,0,0,0,0],d=a.reduce((w,y)=>w+y,0);return console.log(`Habit: ${t.name}, Weekly Data: ${a}, Total: ${d}`),{name:t.name,icon:t.icon,weeklyTotal:d}}),console.log("Final habits data:",this.habitsData),this.habitsData=[...this.habitsData]}calculateStats(n){n&&(this.totalCompleted=Object.values(n).reduce((i,t)=>Array.isArray(t)?i+t.reduce((a,d)=>a+d,0):i,0),this.streak=Math.max(...this.weekData.map(i=>i.value)))}startDailyChallenge(){this.router.navigate(["/habit-log"])}navigateToHabit(){this.router.navigate(["/habit"])}static{this.\u0275fac=function(i){return new(i||g)(m(x),m(P),m(C),m(k))}}static{this.\u0275cmp=h({type:g,selectors:[["app-home"]],decls:59,vars:6,consts:[[3,"fullscreen"],[1,"logo-container"],["src","assets/images/logo.png","alt","Logo Vida Plena",1,"logo-img"],[1,"home-container"],[1,"home-icons-row"],[1,"icon-block",3,"click"],["name","sunny"],["name","water"],["name","leaf"],["name","restaurant"],["name","walk"],["name","scale"],["name","moon"],["name","heart-circle-outline"],[1,"challenge-btn-container"],["expand","block",1,"challenge-btn",3,"click"],[1,"spiritual-message-container"],[1,"spiritual-message-title"],[1,"spiritual-message-content"],[1,"spiritual-message-ref"],[1,"reports-container"],[3,"habitsData"],[1,"stats-container"],[1,"stat-item"],["name","flame",1,"stat-icon"],[1,"stat-text"],["name","checkmark-circle",1,"stat-icon"]],template:function(i,t){i&1&&(e(0,"ion-content",0)(1,"div",1),l(2,"img",2),o(),e(3,"div",3)(4,"div",4)(5,"div",5),c("click",function(){return t.navigateToHabit()}),l(6,"ion-icon",6),e(7,"span"),r(8,"Sunlight"),o()(),e(9,"div",5),c("click",function(){return t.navigateToHabit()}),l(10,"ion-icon",7),e(11,"span"),r(12,"Water"),o()(),e(13,"div",5),c("click",function(){return t.navigateToHabit()}),l(14,"ion-icon",8),e(15,"span"),r(16,"Air"),o()(),e(17,"div",5),c("click",function(){return t.navigateToHabit()}),l(18,"ion-icon",9),e(19,"span"),r(20,"Healthy Food"),o()(),e(21,"div",5),c("click",function(){return t.navigateToHabit()}),l(22,"ion-icon",10),e(23,"span"),r(24,"Exercise"),o()(),e(25,"div",5),c("click",function(){return t.navigateToHabit()}),l(26,"ion-icon",11),e(27,"span"),r(28,"Temperance"),o()(),e(29,"div",5),c("click",function(){return t.navigateToHabit()}),l(30,"ion-icon",12),e(31,"span"),r(32,"Rest"),o()(),e(33,"div",5),c("click",function(){return t.navigateToHabit()}),l(34,"ion-icon",13),e(35,"span"),r(36,"Trust in God"),o()()(),e(37,"div",14)(38,"ion-button",15),c("click",function(){return t.startDailyChallenge()}),r(39,"Start Daily Challenge"),o()(),e(40,"div",16)(41,"div",17),r(42,"Spiritual Message of the Day"),o(),e(43,"div",18),r(44),l(45,"br"),e(46,"span",19),r(47),o()()(),e(48,"div",20),l(49,"app-bar-chart",21),e(50,"div",22)(51,"div",23),l(52,"ion-icon",24),e(53,"span",25),r(54),o()(),e(55,"div",23),l(56,"ion-icon",26),e(57,"span",25),r(58),o()()()()()()),i&2&&(u("fullscreen",!0),s(44),p(" ",t.spiritualVerse==null?null:t.spiritualVerse.text,""),s(3),p("- ",t.spiritualVerse==null?null:t.spiritualVerse.reference,""),s(2),u("habitsData",t.habitsData),s(5),p("",t.streak,"-day streak"),s(4),p("",t.totalCompleted," total completed"))},dependencies:[b,_,f,v],styles:[".logo-img[_ngcontent-%COMP%]{max-width:210px;width:100%;height:auto;display:block;border-radius:100%;background:#d7f1c3;padding:0}.logo-container[_ngcontent-%COMP%]{width:100%;display:flex;background:#d7f1c3;justify-content:center;margin-top:40px;margin-bottom:0}.menu-container[_ngcontent-%COMP%]{background:#d7f1c3;min-height:100vh;padding:16px}.menu-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;max-width:600px;margin:0 auto}.menu-item[_ngcontent-%COMP%]{height:auto;--padding-start: 8px;--padding-end: 8px}.home-icons-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;background:#e6f9d5;padding:16px 8px;border-radius:12px;margin:0 auto 32px;max-width:900px;flex-wrap:wrap;gap:8px}.icon-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;min-width:80px;cursor:pointer;transition:transform .2s ease;flex:1;min-width:60px}.icon-block[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.icon-block[_ngcontent-%COMP%]:active{transform:scale(.95)}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:4px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b;margin-top:2px;text-align:center;line-height:1.2}.challenge-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:32px 0 24px;padding:0 16px}.challenge-btn[_ngcontent-%COMP%]{background:#176b3a;color:#fff;font-size:1.5rem;font-weight:700;border-radius:12px;width:100%;max-width:600px;height:64px;--background: #176b3a;--color: #fff}.spiritual-message-container[_ngcontent-%COMP%]{background:#d8f9be;border-radius:12px;max-width:600px;margin:0 auto 32px;padding:20px 24px;box-shadow:0 2px 8px #0000000a}.spiritual-message-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:8px;color:#2e473b}.spiritual-message-content[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b}.spiritual-message-ref[_ngcontent-%COMP%]{font-size:.95rem;color:#176b3a}.reports-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto 32px;background:#f0f8f0;border-radius:12px;padding:84px 16px;box-shadow:0 2px 8px #0000000a}.reports-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:12px;color:#2e473b}.stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:16px;padding:16px 0;border-top:1px solid #e0e0e0}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stat-icon[_ngcontent-%COMP%]{font-size:20px;color:#176b3a}.stat-text[_ngcontent-%COMP%]{font-size:.9rem;color:#2e473b;font-weight:500}.reports-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media (max-width: 768px){.home-icons-row[_ngcontent-%COMP%]{padding:12px 4px;margin:0 8px 24px}.icon-block[_ngcontent-%COMP%]{min-width:50px;margin:0 4px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.challenge-btn[_ngcontent-%COMP%]{font-size:1.3rem;height:56px}.spiritual-message-container[_ngcontent-%COMP%]{margin:0 16px 24px;padding:16px 20px}.reports-container[_ngcontent-%COMP%]{margin:0 16px 24px;padding:60px 12px}}@media (max-width: 480px){.logo-img[_ngcontent-%COMP%]{max-width:180px}.logo-container[_ngcontent-%COMP%]{margin-top:20px}.home-icons-row[_ngcontent-%COMP%]{padding:8px 2px;margin:0 4px 20px}.icon-block[_ngcontent-%COMP%]{min-width:40px;margin:0 2px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.challenge-btn[_ngcontent-%COMP%]{font-size:1.2rem;height:52px}.spiritual-message-container[_ngcontent-%COMP%]{margin:0 8px 20px;padding:12px 16px}.reports-container[_ngcontent-%COMP%]{margin:0 8px 20px;padding:50px 8px}}"]})}}return g})();export{z as HomePage};
