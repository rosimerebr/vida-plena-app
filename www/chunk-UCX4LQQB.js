import{g as D}from"./chunk-YHIRJYDG.js";import{a as B}from"./chunk-F7E72B2R.js";import"./chunk-RM6A764G.js";import"./chunk-CXOURO3F.js";import"./chunk-QUJFQN2Y.js";import"./chunk-5FCHEXSL.js";import"./chunk-4CVPKZA4.js";import"./chunk-BDYKZDQC.js";import"./chunk-H4ZOJJKK.js";import"./chunk-S2VWKIYS.js";import"./chunk-A3MNM4YE.js";import"./chunk-7FY2OE2O.js";import"./chunk-JCQ7FCCI.js";import"./chunk-63MUEZF4.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EAEWKW6I.js";import"./chunk-CKP3SGE2.js";import"./chunk-OFNGLZOM.js";import{c as b,e as O,g as T,h as k,i as W,m as N,s as j}from"./chunk-AE23IOV2.js";import{$ as h,C as d,F as m,G as o,H as r,I as l,N as C,O as E,Va as P,W as p,Wa as S,X as I,Z as u,_ as f,_a as L,ga as M,ia as y,oa as x,v as s,w as g,y as v}from"./chunk-PTDB2MRV.js";import"./chunk-FJRRL5JZ.js";import"./chunk-3C4MD3TU.js";import"./chunk-SUXJXZP3.js";import"./chunk-UHOD3RQT.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-2LSUWKNB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as c}from"./chunk-JHI3MBHO.js";function F(n,w){n&1&&(o(0,"div",12),p(1,"Enter an email."),r())}function R(n,w){n&1&&(o(0,"div",12),p(1,"Enter a password."),r())}function z(n,w){if(n&1&&(o(0,"div",12),p(1),r()),n&2){let e=E();s(),I(e.loginError)}}var V=(()=>{class n{constructor(e,t,i){this.authService=e,this.router=t,this.toastController=i,this.email="",this.password="",this.emailError=!1,this.passwordError=!1,this.loginError=""}ngOnInit(){}onLogin(){this.emailError=!this.email,this.passwordError=!this.password,this.loginError="",!(this.emailError||this.passwordError)&&(console.log("Trying to login with:",{email:this.email,password:this.password}),this.authService.login(this.email,this.password).subscribe({next:e=>c(this,null,function*(){console.log("Successful login:",e),e.access_token&&localStorage.setItem("token",e.access_token),e.user&&localStorage.setItem("user",JSON.stringify(e.user)),yield(yield this.toastController.create({message:"Login successfully!",duration:2e3,color:"success",position:"top"})).present(),this.router.navigate(["/home"])}),error:e=>c(this,null,function*(){console.error("Login error:",e);let t="Invalid email or password.";e.status===0?t="Connection error. Check if the backend is running..":e.error?.message?t=e.error.message:e.status===401&&(t="Incorrect email or password."),this.loginError=t,yield(yield this.toastController.create({message:t,duration:3e3,color:"danger",position:"top"})).present()})}))}static{this.\u0275fac=function(t){return new(t||n)(g(B),g(x),g(D))}}static{this.\u0275cmp=v({type:n,selectors:[["app-login"]],decls:20,vars:6,consts:[[3,"fullscreen"],["id","container"],["src","assets/images/logo.png","alt","The Wisconsin State Capitol building in Madison, WI at night"],["label","Email:","placeholder","Enter your email.",1,"custom",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","password","label","Password",3,"ngModelChange","ngModel"],["slot","end"],[1,"wrapper"],[3,"click"],[1,"ion-activatable","ripple-parent","rectangle"],[1,"ion-activatable","ripple-parent","rounded-rectangle"],[1,"ion-activatable","ripple-parent","circle"],[1,"error-message"]],template:function(t,i){t&1&&(o(0,"ion-content",0)(1,"div",1),l(2,"ion-img",2),o(3,"ion-item")(4,"ion-input",3),h("ngModelChange",function(a){return f(i.email,a)||(i.email=a),a}),r()(),d(5,F,2,0,"div",4),o(6,"ion-item")(7,"ion-input",5),h("ngModelChange",function(a){return f(i.password,a)||(i.password=a),a}),l(8,"ion-input-password-toggle",6),r()(),d(9,R,2,0,"div",4),o(10,"div",7)(11,"ion-button",8),C("click",function(){return i.onLogin()}),p(12,"LOGIN"),r(),d(13,z,2,1,"div",4),o(14,"div",9),l(15,"ion-ripple-effect"),r(),o(16,"div",10),l(17,"ion-ripple-effect"),r(),o(18,"div",11),l(19,"ion-ripple-effect"),r()()()()),t&2&&(m("fullscreen",!0),s(4),u("ngModel",i.email),s(),m("ngIf",i.emailError),s(2),u("ngModel",i.password),s(2),m("ngIf",i.passwordError),s(4),m("ngIf",i.loginError))},dependencies:[T,W,O,y,M,L,P,S,j,k,b,N],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:40%;transform:translateY(-50%);padding:0 16px}ion-item[_ngcontent-%COMP%]{width:90%;max-width:400px;margin:0 auto}ion-img[_ngcontent-%COMP%]{width:90%;max-width:300px;margin:0 auto}ion-content[_ngcontent-%COMP%]{--background: #D7F1C3}ion-input.custom[_ngcontent-%COMP%]{--background: none}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:1rem;margin:4px 0 12px 8px}@media (max-width: 480px){#container[_ngcontent-%COMP%]{top:35%;padding:0 8px}ion-item[_ngcontent-%COMP%]{width:95%;max-width:350px}ion-img[_ngcontent-%COMP%]{width:95%;max-width:250px}}@media (max-width: 768px){#container[_ngcontent-%COMP%]{top:30%}}"]})}}return n})();export{V as LoginPage};
