import{a as u}from"./chunk-RM6A764G.js";import{c as T,d as z,e as E,f as L,l as B,o as D,p as F,r as j,t as $}from"./chunk-AE23IOV2.js";import{C as P,F as l,G as a,H as r,I as d,M as S,N as p,O as b,W as g,X as h,_a as H,a as x,fa as M,g as _,i as v,ia as y,ka as w,o as k,oa as I,p as C,v as c,w as m,y as O}from"./chunk-PTDB2MRV.js";import"./chunk-FJRRL5JZ.js";import"./chunk-3C4MD3TU.js";import"./chunk-SUXJXZP3.js";import"./chunk-UHOD3RQT.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-2LSUWKNB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as f}from"./chunk-JHI3MBHO.js";var N=(()=>{class i{constructor(t){this.http=t}saveHabitLog(t){localStorage.setItem("habit-log-"+t.date,JSON.stringify(t.habits))}getHabitLog(t){let e=localStorage.getItem("habit-log-"+t);return e?JSON.parse(e):null}sendHabitToBackend(t){return this.http.post(`${u.apiUrl}/report`,t)}saveHabitWithBackendSync(t,e){this.saveHabitLog(t);let n=[];return Object.entries(t.habits).forEach(([o,s])=>{s&&n.push({userId:e,habit:o,date:t.date})}),n.length>0?this.http.post(`${u.apiUrl}/report`,n):new x(o=>{o.next({message:"No habits to send"}),o.complete()})}static{this.\u0275fac=function(e){return new(e||i)(v(w))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function J(i,U){if(i&1){let t=S();a(0,"div",10),d(1,"ion-icon",11),a(2,"span",12),g(3),r(),a(4,"ion-toggle",13),p("ionChange",function(n){let o=k(t).$implicit,s=b();return C(s.onToggle(o.name,n.detail.checked))}),r()()}if(i&2){let t=U.$implicit,e=b();c(),l("name",t.icon),c(2),h(t.name),c(),l("checked",e.habitStatus[t.name])}}var Z=(()=>{class i{constructor(t,e){this.habitService=t,this.router=e,this.today="",this.displayDate="",this.habits=[{name:"Sunlight",icon:"sunny"},{name:"Water",icon:"water"},{name:"Air",icon:"leaf"},{name:"Healthy Food",icon:"restaurant"},{name:"Exercise",icon:"walk"},{name:"Temperance",icon:"scale"},{name:"Rest",icon:"moon"},{name:"Trust in God",icon:"heart-circle-outline"}],this.habitStatus={}}ngOnInit(){let t=new Date;this.today=t.toISOString().slice(0,10);let e=t.toLocaleDateString("en-US",{month:"long"}),n=t.getDate();this.displayDate=`${e} ${n}`;let o=this.habitService.getHabitLog(this.today);this.habits.forEach(s=>{this.habitStatus[s.name]=o?!!o[s.name]:!1})}onToggle(t,e){this.habitStatus[t]=e}save(){let t={date:this.today,habits:f({},this.habitStatus)};this.habitService.saveHabitWithBackendSync(t,"default-user").subscribe({next:n=>{console.log("Habits saved successfully:",n),this.router.navigate(["/home"])},error:n=>{console.error("Error saving habits to backend:",n),this.habitService.saveHabitLog(t),this.router.navigate(["/home"])}})}goBack(){this.router.navigate(["/home"])}static{this.\u0275fac=function(e){return new(e||i)(m(N),m(I))}}static{this.\u0275cmp=O({type:i,selectors:[["app-habit-log"]],decls:17,vars:3,consts:[["slot","start"],[1,"habit-back-btn"],["fill","clear",3,"click"],["name","arrow-back-circle"],[3,"fullscreen"],[1,"habit-log-container"],[1,"habit-log-date"],[1,"habit-log-list"],["class","habit-log-item",4,"ngFor","ngForOf"],["expand","block",1,"habit-log-save-btn",3,"click"],[1,"habit-log-item"],[3,"name"],[1,"habit-log-label"],[3,"ionChange","checked"]],template:function(e,n){e&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),d(3,"ion-menu-button"),r(),a(4,"ion-title"),g(5,"H\xE1bitos"),r()()(),a(6,"div",1)(7,"ion-button",2),p("click",function(){return n.goBack()}),d(8,"ion-icon",3),r()(),a(9,"ion-content",4)(10,"div",5)(11,"div",6),g(12),r(),a(13,"div",7),P(14,J,5,3,"div",8),r(),a(15,"ion-button",9),p("click",function(){return n.save()}),g(16,"Save"),r()()()),e&2&&(c(9),l("fullscreen",!0),c(3),h(n.displayDate),c(2),l("ngForOf",n.habits))},dependencies:[E,y,M,H,j,$,T,L,F,z,B,D],styles:[".habit-log-container[_ngcontent-%COMP%]{background:#fff;border-radius:28px;box-shadow:0 2px 16px #0000000f;max-width:400px;margin:40px auto 0;padding:32px 24px 28px;display:flex;flex-direction:column;align-items:stretch}.habit-log-date[_ngcontent-%COMP%]{background:#f5ede3;color:#2e473b;font-size:1.6rem;font-weight:600;border-radius:18px;padding:10px 0;text-align:center;margin-bottom:28px}.habit-log-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:24px}.habit-log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;border-bottom:1px solid #e6e6e6;padding:8px 0}.habit-log-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.habit-log-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#2e473b;min-width:32px}.habit-log-label[_ngcontent-%COMP%]{flex:1;font-size:1.18rem;color:#2e473b;font-weight:500}ion-toggle[_ngcontent-%COMP%]{--handle-background-checked: #4b6e5c;--handle-background: #e6e6e6;--background-checked: #dbe7df;--background: #e6e6e6;margin-right:0}.habit-log-notes-label[_ngcontent-%COMP%]{font-size:1.1rem;color:#2e473b;font-weight:500;margin:18px 0 6px}.habit-log-notes[_ngcontent-%COMP%]{background:#fafafa;border-radius:12px;border:1px solid #e6e6e6;font-size:1rem;padding:10px 12px;margin-bottom:22px;min-height:48px}.habit-log-save-btn[_ngcontent-%COMP%]{--background: #4b6e5c;--border-radius: 16px;font-size:1.2rem;font-weight:700;letter-spacing:.5px;height:48px}.home-icons-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;background:#e6f9d5;padding:24px 8px 16px;border-radius:12px;margin:0 auto 32px;max-width:900px;flex-wrap:wrap}.icon-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;min-width:80px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:4px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b;margin-top:2px}.habit-back-btn[_ngcontent-%COMP%]{position:absolute;top:18px;left:12px;z-index:10}.habit-back-btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none;font-size:2rem;padding:0}@media (max-width: 480px){.habit-log-container[_ngcontent-%COMP%]{padding:16px 4px 18px;border-radius:16px}.habit-log-date[_ngcontent-%COMP%]{font-size:1.2rem;padding:6px 0}.habit-log-label[_ngcontent-%COMP%]{font-size:1rem}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}}"]})}}return i})();export{Z as HabitLogPage};
