import{a as k}from"./chunk-LDF7BAX4.js";import{a as f,b as v}from"./chunk-GEET3W3Y.js";import"./chunk-RM6A764G.js";import{c as b,j as _}from"./chunk-7ME6M5UI.js";import{F as h,H as e,I as a,J as r,O as c,W as o,Y as m,na as x,v as s,w as d,y as u}from"./chunk-JA4QAL2P.js";import"./chunk-RHZBV3UF.js";import"./chunk-34QWLOQV.js";import"./chunk-MZFQXXBY.js";import"./chunk-IIMO22WL.js";import"./chunk-JWOVPSB7.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var D=(()=>{class p{constructor(t,i,n){this.router=t,this.bibleService=i,this.reportService=n,this.weekData=[{label:"S",value:0},{label:"M",value:0},{label:"T",value:0},{label:"W",value:0},{label:"T",value:0},{label:"F",value:0},{label:"S",value:0}],this.spiritualVerse=null,this.reportData=null,this.habitsData=[],this.totalCompleted=0,this.streak=0}ngOnInit(){console.log("Fetching verse..."),this.bibleService.getRandomVerse().subscribe({next:t=>{console.log("Verse received:",t),this.spiritualVerse=t},error:t=>{console.error("Error fetching verse:",t)}}),this.loadWeeklyReport()}loadWeeklyReport(){console.log("Loading weekly report..."),this.reportService.getWeeklyReport().subscribe({next:t=>{console.log("Weekly report received:",t),this.reportData=t,setTimeout(()=>{this.processHabitsData(t),this.calculateStats(t),console.log("Final habits data after processing:",this.habitsData)},100)},error:t=>{console.error("Error fetching weekly report:",t),this.useTestData()}})}useTestData(){console.log("Using test data due to error"),this.habitsData=[{name:"Sunlight",icon:"sunny",weeklyTotal:3},{name:"Water",icon:"water",weeklyTotal:5},{name:"Air",icon:"leaf",weeklyTotal:2},{name:"Healthy Food",icon:"restaurant",weeklyTotal:4},{name:"Exercise",icon:"walk",weeklyTotal:6},{name:"Temperance",icon:"scale",weeklyTotal:1},{name:"Rest",icon:"moon",weeklyTotal:7},{name:"Trust in God",icon:"heart-circle-outline",weeklyTotal:3}],this.totalCompleted=this.habitsData.reduce((t,i)=>t+i.weeklyTotal,0),this.streak=Math.max(...this.habitsData.map(t=>t.weeklyTotal))}processHabitsData(t){if(!t)return;console.log("Processing habits data:",t);let i=[{name:"Sunlight",icon:"sunny"},{name:"Water",icon:"water"},{name:"Air",icon:"leaf"},{name:"Healthy Food",icon:"restaurant"},{name:"Exercise",icon:"walk"},{name:"Temperance",icon:"scale"},{name:"Rest",icon:"moon"},{name:"Trust in God",icon:"heart-circle-outline"}];this.habitsData=i.map(n=>{let l=t[n.name]||[0,0,0,0,0,0,0],g=l.reduce((P,C)=>P+C,0);return console.log(`Habit: ${n.name}, Weekly Data: ${l}, Total: ${g}`),{name:n.name,icon:n.icon,weeklyTotal:g}}),console.log("Final habits data:",this.habitsData),this.habitsData=[...this.habitsData]}calculateStats(t){t&&(this.totalCompleted=Object.values(t).reduce((i,n)=>Array.isArray(n)?i+n.reduce((l,g)=>l+g,0):i,0),this.streak=Math.max(...this.weekData.map(i=>i.value)))}startDailyChallenge(){this.router.navigate(["/habit-log"])}navigateToHabit(){this.router.navigate(["/habit"])}static{this.\u0275fac=function(i){return new(i||p)(d(x),d(k),d(v))}}static{this.\u0275cmp=u({type:p,selectors:[["app-home"]],decls:58,vars:5,consts:[[1,"logo-container"],["src","assets/images/logo.png","alt","Logo Vida Plena",1,"logo-img"],[1,"home-container"],[1,"home-icons-row"],[1,"icon-block",3,"click"],["name","sunny"],["name","water"],["name","leaf"],["name","restaurant"],["name","walk"],["name","scale"],["name","moon"],["name","heart-circle-outline"],[1,"challenge-btn-container"],["expand","block",1,"challenge-btn",3,"click"],[1,"spiritual-message-container"],[1,"spiritual-message-title"],[1,"spiritual-message-content"],[1,"spiritual-message-ref"],[1,"reports-container"],[3,"habitsData"],[1,"stats-container"],[1,"stat-item"],["name","flame",1,"stat-icon"],[1,"stat-text"],["name","checkmark-circle",1,"stat-icon"]],template:function(i,n){i&1&&(e(0,"div",0),r(1,"img",1),a(),e(2,"div",2)(3,"div",3)(4,"div",4),c("click",function(){return n.navigateToHabit()}),r(5,"ion-icon",5),e(6,"span"),o(7,"Sunlight"),a()(),e(8,"div",4),c("click",function(){return n.navigateToHabit()}),r(9,"ion-icon",6),e(10,"span"),o(11,"Water"),a()(),e(12,"div",4),c("click",function(){return n.navigateToHabit()}),r(13,"ion-icon",7),e(14,"span"),o(15,"Air"),a()(),e(16,"div",4),c("click",function(){return n.navigateToHabit()}),r(17,"ion-icon",8),e(18,"span"),o(19,"Healthy Food"),a()(),e(20,"div",4),c("click",function(){return n.navigateToHabit()}),r(21,"ion-icon",9),e(22,"span"),o(23,"Exercise"),a()(),e(24,"div",4),c("click",function(){return n.navigateToHabit()}),r(25,"ion-icon",10),e(26,"span"),o(27,"Temperance"),a()(),e(28,"div",4),c("click",function(){return n.navigateToHabit()}),r(29,"ion-icon",11),e(30,"span"),o(31,"Rest"),a()(),e(32,"div",4),c("click",function(){return n.navigateToHabit()}),r(33,"ion-icon",12),e(34,"span"),o(35,"Trust in God"),a()()(),e(36,"div",13)(37,"ion-button",14),c("click",function(){return n.startDailyChallenge()}),o(38,"Start Daily Challenge"),a()(),e(39,"div",15)(40,"div",16),o(41,"Spiritual Message of the Day"),a(),e(42,"div",17),o(43),r(44,"br"),e(45,"span",18),o(46),a()()(),e(47,"div",19),r(48,"app-bar-chart",20),e(49,"div",21)(50,"div",22),r(51,"ion-icon",23),e(52,"span",24),o(53),a()(),e(54,"div",22),r(55,"ion-icon",25),e(56,"span",24),o(57),a()()()()()),i&2&&(s(43),m(" ",n.spiritualVerse==null?null:n.spiritualVerse.text,""),s(3),m("- ",n.spiritualVerse==null?null:n.spiritualVerse.reference,""),s(2),h("habitsData",n.habitsData),s(5),m("",n.streak,"-day streak"),s(4),m("",n.totalCompleted," total completed"))},dependencies:[b,_,f],styles:[".logo-img[_ngcontent-%COMP%]{max-width:210px;width:100%;height:auto;display:block;border-radius:100%;background:#d7f1c3;padding:0}.logo-container[_ngcontent-%COMP%]{width:100%;display:flex;background:#d7f1c3;justify-content:center;margin-top:40px;margin-bottom:0}.menu-container[_ngcontent-%COMP%]{background:#d7f1c3;min-height:100vh;padding:16px}.menu-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;max-width:600px;margin:0 auto}.menu-item[_ngcontent-%COMP%]{height:auto;--padding-start: 8px;--padding-end: 8px}.home-icons-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;background:#e6f9d5;padding:16px 8px;border-radius:12px;margin:0 auto 32px;max-width:900px;flex-wrap:wrap;gap:8px}.icon-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;min-width:80px;cursor:pointer;transition:transform .2s ease;flex:1;min-width:60px}.icon-block[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.icon-block[_ngcontent-%COMP%]:active{transform:scale(.95)}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:4px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b;margin-top:2px;text-align:center;line-height:1.2}.challenge-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:32px 0 24px;padding:0 16px}.challenge-btn[_ngcontent-%COMP%]{background:#176b3a;color:#fff;font-size:1.5rem;font-weight:700;border-radius:12px;width:100%;max-width:600px;height:64px;--background: #176b3a;--color: #fff}.spiritual-message-container[_ngcontent-%COMP%]{background:#d8f9be;border-radius:12px;max-width:600px;margin:0 auto 32px;padding:20px 24px;box-shadow:0 2px 8px #0000000a}.spiritual-message-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:8px;color:#2e473b}.spiritual-message-content[_ngcontent-%COMP%]{font-size:1rem;color:#2e473b}.spiritual-message-ref[_ngcontent-%COMP%]{font-size:.95rem;color:#176b3a}.reports-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto 32px;background:#f0f8f0;border-radius:12px;padding:84px 16px;box-shadow:0 2px 8px #0000000a}.reports-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:12px;color:#2e473b}.stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:16px;padding:16px 0;border-top:1px solid #e0e0e0}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stat-icon[_ngcontent-%COMP%]{font-size:20px;color:#176b3a}.stat-text[_ngcontent-%COMP%]{font-size:.9rem;color:#2e473b;font-weight:500}.reports-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media (max-width: 768px){.home-icons-row[_ngcontent-%COMP%]{padding:12px 4px;margin:0 8px 24px}.icon-block[_ngcontent-%COMP%]{min-width:50px;margin:0 4px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.challenge-btn[_ngcontent-%COMP%]{font-size:1.3rem;height:56px}.spiritual-message-container[_ngcontent-%COMP%]{margin:0 16px 24px;padding:16px 20px}.reports-container[_ngcontent-%COMP%]{margin:0 16px 24px;padding:60px 12px}}@media (max-width: 480px){.logo-img[_ngcontent-%COMP%]{max-width:180px}.logo-container[_ngcontent-%COMP%]{margin-top:20px}.home-icons-row[_ngcontent-%COMP%]{padding:8px 2px;margin:0 4px 20px}.icon-block[_ngcontent-%COMP%]{min-width:40px;margin:0 2px}.icon-block[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.icon-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.challenge-btn[_ngcontent-%COMP%]{font-size:1.2rem;height:52px}.spiritual-message-container[_ngcontent-%COMP%]{margin:0 8px 20px;padding:12px 16px}.reports-container[_ngcontent-%COMP%]{margin:0 8px 20px;padding:50px 8px}}"]})}}return p})();export{D as HomePage};
